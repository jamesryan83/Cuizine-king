


## Code style notes

Don't use style="" in html.  Except for style="display: none" on big things (loading screen etc.)
    and things where it's important for them to be hidden if the css doesn't load

Don't use semantic html elements.  Makes things a bit easier

Be careful with naming things.  Id's should be very specific especially on bigger pages

Any images used for testing should be funny






## Design patterns

Node

    // something.js

    "use strict";

    exports = module.exports = {

        doSomething: function (text) {
            console.log(text);
        },

        getSomething: function () {
            return "blah 2";
        },
    }

    // in another file
    var something = require("path/to/something");
    something.doSomething("blah 1");


Client

    "use strict";
    var app = app || {};

    app.something = {

        // startup function
        init: function () {
            this.doSomething("blah 1");
        },

        doSomething: function (text) {
            console.log(text);
        },

        doSomethingElse: function () {
            console.log("blah 2");
        },
    }

    // call start function
    app.something.init();


    // Note
    var app = app || {};  just means use app if it's defined already
    somewhere else or make a new object.  All the js files get loaded
    on the client side kind of out of order and it doesn't start till
    document.ready is fired in logged-in.js or logged-out.js





## How the server works

The node server doesn't start listening until after the database and session store
    are connected.  After that it just processes requests until it crashes






## How pages work on the website

The routes are setup in the init function of other/router.js when the server
    is started.  router.init is called from server.js

At the bottom of www/js/shared/client-router.js are two arrays of routes.
    loggedOutList for example is an array of all possible logged out routes.
    client-router.js is in with the client-side files because it's required on cordova.
    this list is passed into router.get() when the router starts up and
    if any one of these routes is called it calls renderpage

        router.get(clientRouter.loggedOutList, this.renderPage.bind(this));


When a request for /help comes in it goes to other/router.js into the above
    function and then renderPage in other/router.js is called.

renderPage gets the data and html for the page.  The data
    comes from client-router.js and the html comes from the generated html json file
    The data is just basic stuff to load the page.  Most of the data comes from the api

The page is rendered with the data and sent to the client.  index.ejs is the main
    html page that is loaded as the base for all other pages








## How pages work on cordova
    sort of the same as above

    TODO





## How api routes work

"/api/v1/login" for example is an api route.  They're called using ajax on the
    client side and return json data or null.  They also return a status of 200
    by default or a specified status





## Database

All the database SQL code is in server/sql.  The create.sql and _recreate.sql files
are generated by server/gulp/generate-sql-create.js.



## Testing

    Creating the test db.  Run the following sql scripts in this order
    1. _recreate-db.sql
    2. /tests/sql/_create.sql
    3. /tests/sql/_recreate-all.sql
    4. _seed-postcodes.sql (and change USE menuthing to USE menuthingTest)

    after that just use _recreate.sql to recreate everything except postcodes

## Client js

    TODO






